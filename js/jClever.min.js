(function(a){a.fn.jClever=function(e){var e=a.extend({applyTo:{select:!0,checkbox:!0,radio:!0,button:!0,file:!0,input:!0,textarea:!0},validate:{state:!1,items:{}},errorTemplate:'<span class="jClever-error-label"></span>',errorClassTemplate:"jClever-error-label",selfClass:"default",fileUploadText:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"},e),m={},l=[],k={},n={isNumeric:function(a){return/^\d+$/.test(a)},isString:function(a){return/^[a-zA-Z\u0410-\u042f\u0430-\u044f]+$/.test(a)},isAnyText:function(a){return/^[a-zA-Z\u0410-\u042f\u0430-\u044f0-9]+$/.test(a)},
isEmail:function(a){return/^([a-z0-9_-]+\.)*[a-z0-9_-]+@[a-z0-9_-]+(\.[a-z0-9_-]+)*\.[a-z]{2,4}$/.test(a)},isSiteURL:function(a){return/^((https?|ftp)\:\/\/)?([a-z0-9]{1,})([a-z0-9-.]*)\.([a-z]{2,4})$/.test(a)}},p=999,i=1,h={init:function(b){!0===e.validate.state&&a(b).submit(function(){var c=a(b).get(0),d={};a(c).find(".error").removeClass("error");for(var g in e.validate.items)if(void 0!==c[g])for(var f in e.validate.items[g])switch(f){case "required":if(""==c[g].value||c[g].value==a(c[g]).data("placeholder"))d[g]=
e.validate.items[g][f];break;case "numeric":!0!=n.isNumeric(c[g].value)&&(d[g]=e.validate.items[g][f]);break;case "str":!0!=n.isString(c[g].value)&&(d[g]=e.validate.items[g][f]);break;case "stringAndNumeric":!0!=n.isAnyText(c[g].value)&&(d[g]=e.validate.items[g][f]);break;case "mail":!0!=n.isEmail(c[g].value)&&(d[g]=e.validate.items[g][f]);break;case "siteURL":!0!=n.isSiteURL(c[g].value)&&(d[g]=e.validate.items[g][f])}g=0;for(var h in d)if(void 0!=c[h]){f=d[h];var i=a(c[h]).parents(".jClever-element"),
j=i.find("."+e.errorClassTemplate);i.addClass("error");j.text(f);g++}return g?!1:!0});a(b).find("input[type=text], textarea").each(function(){var b=a(this),d=a(this).data("placeholder");""==b.val()&&b.val(d).addClass("placeholdered");b.focusin(function(){b.val()==d&&b.val("").removeClass("placeholdered")});b.focusout(function(){""==b.val()&&b.val(d).addClass("placeholdered")})});e.applyTo.select&&a(b).find("select").each(function(){k[a(this).attr("name")]={type:"select",value:a(this).attr("value")};
h.selectActivate(this,p,i);p--;i++});e.applyTo.checkbox&&a(b).find("input[type=checkbox]").each(function(){k[a(this).attr("name")]={type:"checkbox",value:a(this).is(":checked")?1:0};h.checkboxActivate(this,i);i++});e.applyTo.radio&&a(b).find("input[type=radio]").each(function(){k[a(this).attr("name")]={type:"radio",value:a(this).is(":checked")?1:0};h.radioActivate(this,i);i++});e.applyTo.file&&a(b).find("input[type=file]").each(function(){k[a(this).attr("name")]={type:"file",value:""};h.fileActivate(this,
i);i++});e.applyTo.button&&a(b).find("input[type=submit], input[type=reset], input[type=button]").each(function(){h.submitActivate(this,i);i++});e.applyTo.input&&a(b).find("input[type=text], input[type=password]").each(function(){h.inputActivate(this,i);i++});e.applyTo.textarea&&a(b).find("textarea").each(function(){h.textareaActivate(this,i);i++});a(b).find("button[type=reset]").click(function(){h.reset(a(b))})},destroy:function(b){b.find("select").each(function(){var b=a(this).clone();a(this).parents(".jClever-element").empty().after(b)});
b.find("input[type=checkbox]").each(function(){var b=a(this).removeClass("hidden").clone();a(this).parents(".jClever-element").empty().after(b)});b.find("input[type=radio]").each(function(){var b=a(this).removeClass("hidden").clone();a(this).parents(".jClever-element").empty().after(b)});b.find(".jClever-element").remove();b.removeClass("clevered")},reset:function(b){b.find("input[type=radio], input[type=checkbox], select, input[type=file]").each(function(){if(k[a(this).attr("name")])switch(k[a(this).attr("name")].type){case "select":h.selectSetPosition(a(this),
k[a(this).attr("name")].value);break;case "checkbox":h.checkboxSetState(a(this),k[a(this).attr("name")].value);break;case "radio":h.radioSetState(a(this),k[a(this).attr("name")].value);break;case "file":h.fileSetState(a(this),k[a(this).attr("name")].value)}})},selectSetPosition:function(a,c){a.find("option").removeAttr("selected");a.find('option[value="'+c+'"]').attr("selected","selected");a.trigger("change")},selectAdd:function(b){a(element).find(b).each(function(){k[a(this).attr("name")]={type:"select",
value:a(this).attr("value")};h.selectActivate(this,p,i);p--;i++})},checkboxSetState:function(a,c){1==c?a.attr("checked","checked"):a.removeAttr("checked");a.trigger("change")},radioSetState:function(a,c){1==c?a.attr("checked","checked"):a.removeAttr("checked");a.trigger("change")},fileSetState:function(a,c){a.parents(".jClever-element-file").find(".jClever-element-file-name").text(c)},selectCollectionExtend:function(b,c){b[c.attr("name")]={object:c,updateFromHTML:function(b){a("select[name="+this.object[0].name+
"]").html(b).trigger("update");return!1},updateFromJsonObject:function(b){var c="",f;for(f in b)c+='<option value="'+f+'">'+b[f]+"</option>";a("select[name="+this.object[0].name+"]").html(c).trigger("update");return!1}};return b},selectActivate:function(b,c,d){l[a(b).attr("name")]={};m=h.selectCollectionExtend(m,a(b));var g=a(b).width();a(b).wrap('<div class="jClever-element" style="z-index:'+c+';"><div class="jClever-element-select-wrapper" style="width:'+g+"px; z-index:"+c+';"><div class="jClever-element-select-wrapper-design"><div class="jClever-element-select-wrapper-design">').after('<span class="jClever-element-select-center"></span><span class="jClever-element-select-right"><span>v</span></span><div class="jClever-element-select-list-wrapper" style="z-index:'+
c+';"><ul class="jClever-element-select-list"></ul></div>');var f=a(b).parents(".jClever-element").attr("tabindex",d),i=f.find(".jClever-element-select-center");f.find(".jClever-element-select-right");var k=f.find(".jClever-element-select-list"),j=f.find(".jClever-element-select-list-wrapper"),c=a("label[for="+a(b).attr("id")+"]");a(b).attr("disabled")&&f.addClass("disabled");f.append(e.errorTemplate);a(b).find("option").each(function(){a(this).is(":selected")?f.find(".jClever-element-select-list").append(a('<li class="active" data-value="'+
a(this).val()+'"><span><i>'+a(this).text()+"</i></span></li>")):f.find(".jClever-element-select-list").append(a('<li data-value="'+a(this).val()+'"><span><i>'+a(this).text()+"</i></span></li>"))});a(b).find(":selected")?i.text(a(b).find("option:selected").text()):i.text(a(b).find("option:eq(0)").text());f.on("click.jClever",".jClever-element-select-center, .jClever-element-select-right",function(){if(a(b).attr("disabled"))return!1;j.is(":visible")?a(".jClever-element-select-list-wrapper").hide():
(a(".jClever-element-select-list-wrapper").hide(),j.show(),f.trigger("focus"),l[a(b).attr("name")]=j.jScrollPane().data("jsp"))});j.on("blur.jClever",function(){a(this).hide()});f.on("click.jClever","li",function(){var c=a(this).attr("data-value");k.find("li.active").removeClass("active");a(this).addClass("active");a(b).find("option").removeAttr("selected");a(b).find('option[value="'+c+'"]').attr("selected","selected");a(b).trigger("change");j.hide();return!1});a(b).on("change.jClever",function(){if(a(this).attr("disabled"))return!1;
i.text(a(this).find(":selected").text())});a(b).on("update.jClever",function(){var c=a(this).parents(".jClever-element-select-wrapper").find(".jClever-element-select-list").empty();a(this).find("option").each(function(){c.append(a('<li data-value="'+a(this).val()+'"><span><i>'+a(this).text()+"</i></span></li>"))});a(this).parents(".jClever-element-select-wrapper").find(".jClever-element-select-center").text(a(b).find("option:eq(0)").text())});f.on("focus.jClever",function(){a(this).addClass("focused")}).blur(function(){a(this).removeClass("focused")});
c.on("click.jClever",function(){f.trigger("focus");j.show();l[a(b).attr("name")]=j.jScrollPane().data("jsp")});var n="",p=null;f.on("keydown.jClever",function(c){var d=a(b)[0].selectedIndex;switch(c.keyCode){case 40:if(a(b).attr("disabled"))return!1;d<a(b).find("option").length-1&&d++;break;case 38:if(a(b).attr("disabled"))return!1;0<d&&d--;break;case 13:if(j.is(":visible"))j.hide();else{if(a(b).attr("disabled"))return!1;j.show();l[a(b).attr("name")]=j.jScrollPane().data("jsp")}break;case 32:if(j.is(":visible"))j.hide();
else{if(a(b).attr("disabled"))return!1;j.show();l[a(b).attr("name")]=j.jScrollPane().data("jsp")}break;case 9:return j.hide(),!0;default:n+=String.fromCharCode(c.keyCode),clearTimeout(p),p=setTimeout(function(){for(var c=0,g=a(b)[0].options.length,e=0;e<g;e++)if("string"==typeof a(b)[0].options[e].text){var h=a(b)[0].options[e].text.toUpperCase();if(RegExp("^"+n,"i").test(h)){d=c;a(b)[0].selectedIndex=d;f.find("li.selected").removeClass("selected");f.find("li:eq("+d+")").addClass("selected");f.find("option").removeAttr("selected");
f.find("option:eq("+d+")").attr("selected","selected");a(b).trigger("change");j.is(":visible")&&l[a(b).attr("name")].scrollToElement(f.find("li:eq("+d+")"));break}c++}n=""},500)}a(b)[0].selectedIndex=d;f.find("li.selected").removeClass("selected");f.find("li:eq("+d+")").addClass("selected");f.find("option").removeAttr("selected");f.find("option:eq("+d+")").attr("selected","selected");a(b).trigger("change");j.is(":visible")&&l[a(b).attr("name")].scrollToElement(f.find("li:eq("+d+")"));return!1})},
checkboxActivate:function(b,c){var d=a(b).wrap('<div class="jClever-element" tabindex="'+c+'">').addClass("hidden").after('<span class="jClever-element-checkbox-twins"><span class="jClever-element-checkbox-twins-element"></span><span class="jClever-element-checkbox-twins-color"></span></span>'),g=d.attr("id");d.parents(".jClever-element").append(e.errorTemplate);d.is(":checked")&&(d.next(".jClever-element-checkbox-twins").addClass("checked"),a("label[for="+g+"]").addClass("active"));a(b).attr("disabled")&&
d.parents(".jClever-element").addClass("disabled");d.on("change.jClever",function(){if(a(this).attr("disabled"))return!1;a(this).is(":checked")?(d.next(".jClever-element-checkbox-twins").addClass("checked"),a("label[for="+g+"]").addClass("active")):(d.next(".jClever-element-checkbox-twins").removeClass("checked"),a("label[for="+g+"]").removeClass("active"))});d.next(".jClever-element-checkbox-twins").on("click",function(){var b=a(this);b.prev("input[type=checkbox]").is(":checked")?b.prev("input[type=checkbox]").removeAttr("checked"):
b.prev("input[type=checkbox]").attr("checked","checked");b.prev("input[type=checkbox]").trigger("change")});d.parent(".jClever-element").on("keydown.jClever",function(b){var c=a(this).find("input[type=checkbox]");switch(b.keyCode){case 32:c.is(":checked")?c.removeAttr("checked"):c.attr("checked","checked");c.trigger("change");break;default:return}return!1});d.parent(".jClever-element").focus(function(){a(this).addClass("focused")}).blur(function(){a(this).removeClass("focused")})},radioActivate:function(b,
c){var d=a(b).wrap('<div class="jClever-element" tabindex="'+c+'">').addClass("hidden").after('<span class="jClever-element-radio-twins"><span class="jClever-element-radio-twins-element"></span><span class="jClever-element-radio-twins-color"></span></span>'),g=d.attr("id");d.parents(".jClever-element").append(e.errorTemplate);d.is(":checked")&&(d.next(".jClever-element-radio-twins").addClass("checked"),a("label[for="+g+"]").addClass("active"));a(b).attr("disabled")?d.parents(".jClever-element").addClass("disabled"):
(d.on("change.jClever",function(){if(a(this).attr("disabled"))return!1;var c=a(this);c.is(":checked")?(c.next(".jClever-element-radio-twins").addClass("checked"),a("label[for="+g+"]").addClass("active")):(c.next(".jClever-element-radio-twins").removeClass("checked"),a("label[for="+g+"]").removeClass("active"));a('input:radio[name="'+a(b).attr("name")+'"]').not(a(b)).each(function(){a(this).attr("checked",!1).next(".jClever-element-radio-twins").removeClass("checked");a("label[for="+a(this).attr("id")+
"]").removeClass("active")})}),d.next(".jClever-element-radio-twins").on("click",function(){var b=a(this);b.prev("input[type=radio]").is(":checked")?b.prev("input[type=radio]").attr("checked"):b.prev("input[type=radio]").attr("checked","checked");b.prev("input[type=radio]").trigger("change")}),d.parent(".jClever-element").on("keydown.jClever",function(b){var c=a(this).find("input[type=radio]");switch(b.keyCode){case 32:c.is(":checked")?c.removeAttr("checked"):c.attr("checked","checked");c.trigger("change");
break;default:return}return!1}),d.parent(".jClever-element").focus(function(){a(this).addClass("focused")}).blur(function(){a(this).removeClass("focused")}))},submitActivate:function(b){var c=a(b).attr("value");a(b).replaceWith('<button type="'+b.type+'" name="'+b.name+'" id="'+b.id+'"  class="styled '+b.className+'" value="'+c+'"><span><span><span>'+c+"</span></span></span>")},fileActivate:function(b,c){a(b).wrap('<div class="jClever-element" tabindex="'+c+'"><div class="jClever-element-file">').addClass("hidden-file").after('<span class="jClever-element-file-name"><span><span></span></span></span><span class="jClever-element-file-button"><span><span>'+
e.fileUploadText+"</span></span></span>").wrap('<div class="input-file-helper">');a(b).parents(".jClever-element").append(e.errorTemplate);var d=a(b).parents(".jClever-element").find(".jClever-element-file-name>span>span");a(b).on("change.jClever",function(){var b=a(this).val(),b=b.split("\\"),b=b[b.length-1];d.text(b)});a(b).parents(".jClever-element").on("keydown.jClever",function(c){switch(c.keyCode){case 32:a(b).trigger("click");break;default:return}return!1});a(b).parents(".jClever-element").focus(function(){a(this).addClass("focused")}).blur(function(){a(this).removeClass("focused")})},
inputActivate:function(b,c){a(b).wrap('<div class="jClever-element" tabindex="'+c+'"><div class="jClever-element-input"><div class="jClever-element-input"><div class="jClever-element-input">');a(b).parents(".jClever-element").append(e.errorTemplate);a(b).on("focusin.jClever",function(){a(this).parents(".jClever-element").addClass("focused")});a(b).on("focusout.jClever",function(){a(this).parents(".jClever-element").removeClass("focused")})},textareaActivate:function(b,c){a(b).wrap('<div class="jClever-element" tabindex="'+
c+'"><div class="jClever-element-textarea"><div class="jClever-element-textarea"><div class="jClever-element-textarea">');a(b).parents(".jClever-element").append(e.errorTemplate);a(b).on("focusin.jClever",function(){a(this).parents(".jClever-element").addClass("focused")});a(b).on("focusout.jClever",function(){a(this).parents(".jClever-element").removeClass("focused")})},elementAdd:function(b,c,d){switch(c){case "select":h.selectActivate(b,p,i);b=a.extend(m,d.selectCollection);d.selectCollection=
b;break;case "checkbox":h.checkboxActivate(b,i);break;case "radio":h.radioActivate(b,i)}return d},elementDisable:function(b){"string"==typeof b&&(b=a(b));b.attr("disabled","disabled").closest(".jClever-element").addClass("disabled")},elementEnable:function(b){"string"==typeof b&&(b=a(b));b.removeAttr("disabled").closest(".jClever-element").removeClass("disabled")}},q={};return this.each(function(){if(!a(this).hasClass("clevered"))return a(this).addClass("clevered").addClass(e.selfClass),h.init(this),
q={selectCollection:m,destroy:function(a){h.destroy(a)},reset:function(a){h.reset(a)},selectSetPosition:function(b,c){a(b).length&&h.selectSetPosition(a(b),c)},selectAdd:function(a){h.selectAdd(a)},checkboxSetState:function(b,c){if(a(b).length)h.checkboxSetState(a(b),c);else return!1},radioSetState:function(b,c){if(a(b).length)h.radioSetState(a(b),c);else return!1},elementAdd:function(a,c,d){return h.elementAdd(a,c,d)},elementDisable:function(a){return h.elementDisable(a)},elementEnable:function(a){return h.elementEnable(a)}},
m={},a.data(a(this).get(0),"publicApi",q),!0})};a.fn.jCleverAPI=function(e){if(1<this.length)return!1;for(var m=a.data(a(this).get(0),"publicApi"),l=[],k=1;k<arguments.length;k++)l[k-1]=arguments[k];return"function"==typeof m[e]?(1==arguments.length?l=Array(a(this)):l[arguments.length-1]=m,l=m[e].apply(arguments.callee,l),"object"==typeof l?a.data(a(this).get(0),"publicApi",l):l=m,l):m[e]};jQuery.jClever=!0;a(document).mousedown(function(e){0===a(e.target).parents(".jClever-element-select-wrapper").length&&
a(".jClever-element-select-list-wrapper:visible").hide()})})(jQuery);